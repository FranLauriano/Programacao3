<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:f="http://java.sun.com/jsf/core">

<composite:interface>
	<composite:attribute name="familia"></composite:attribute>
	<composite:attribute name="classe"></composite:attribute>
	<composite:facet name="buttons"></composite:facet>
	<composite:facet name="voltar"></composite:facet>
</composite:interface>

<composite:implementation>

	<h:form id="form" class="form-horizontal">
	
		<div class="control-group">	    
		    <label class="control-label">Código da Família</label>
		    <div class="controls">
		    	<h:inputText id="codigo" styleClass="form-control" value="#{cc.attrs.familia.numeroFamilia}" p:placeholder="Código da Família"></h:inputText>
		    </div>
	  	</div> 
	  	
	  	<div class="control-group">	    
		    <label class="control-label">Agente</label>
		    <div class="controls">
		    	<h:selectOneMenu id="acs" styleClass="form-control"	value="#{cc.attrs.classe.acsMatricula}" disabled="#{cc.attrs.classe.disabled}">
					<f:selectItem itemLabel="Selecione um ACS" itemValue="#{null}" />
					<f:selectItems value="#{cc.attrs.classe.agentes}" var="agente"	itemLabel="#{agente.nome}" itemValue="#{agente.matricula}"></f:selectItems>
					<f:ajax process="@this" render="endereco" />
				</h:selectOneMenu>
		    </div>
	  	</div> 
	  	
	  	<div class="control-group">	    
		    <label class="control-label">Endereço</label>
		    <div class="controls">
		    	<h:selectOneMenu id="endereco" styleClass="form-control"	value="#{cc.attrs.classe.enderecoFamilia}">
					<f:selectItem itemLabel="Selecione um Endereço" itemValue="#{null}" />
					<f:selectItems value="#{cc.attrs.classe.endereco}" var="endereco"	itemLabel="#{endereco.rua}" itemValue="#{endereco.cep}"></f:selectItems>
					<f:ajax process="@this" render="acs" />
				</h:selectOneMenu>
		    </div>
	  	</div> 
	  	
	  	<div class="control-group">	    
		    <label class="control-label">Número</label>
		    <div class="controls">
		    	<h:inputText id="numero" styleClass="form-control" value="#{cc.attrs.familia.numero}" p:placeholder="Número da Casa"></h:inputText>
		    </div>
	  	</div> 
	  	
	  	<div class="control-group">	 
			<div class="controls btn-toolbar">
				<button class="btn btn-success" data-toggle="modal"	data-target="#myModal" onclick="return false;">Adicionar Pessoa</button>
				<composite:renderFacet name="buttons"></composite:renderFacet>
				<composite:renderFacet name="voltar"></composite:renderFacet>
			</div>
		</div>

				

		<div class="box">
			<div class="box-content box-nomargin">
				<div class="tab-content">
					<div class="tab-pane active">
						<h:dataTable styleClass="table table-bordered table-condensed table-hover" value="#{cc.attrs.familia.pessoas}" var="pessoa" rendered="#{cc.attrs.familia.pessoas.isEmpty() == false}">
							<h:column>
								<f:facet name="header">SUS</f:facet>
								#{pessoa.sus}
							</h:column>
							<h:column>
								<f:facet name="header">Nome</f:facet>
								#{pessoa.nome}
							</h:column>
							<h:column>
								<f:facet name="header">Data de Nascimento</f:facet>
								#{pessoa.dtnascimento}
							</h:column>
							<h:column>
								<f:facet name="header">Idade</f:facet>
								#{pessoa.idade}
							</h:column>
							<h:column>
								<f:facet name="header">Nome da Mãe</f:facet>
								#{pessoa.mae}
							</h:column>
							<h:column>
								<f:facet name="header">Sexo</f:facet>
								#{pessoa.sexo}
							</h:column>
							<h:column>
								<f:facet name="header">Raça</f:facet>
								#{pessoa.raca.nome}
							</h:column>
							<h:column>
								<f:facet name="header">Frequenta a Escola?</f:facet>
								#{pessoa.frequentaescola}
							</h:column>
							<h:column>
								<f:facet name="header">Escolaridade</f:facet>
								#{pessoa.escolaridade.nome}
							</h:column>
							<h:column>
								<f:facet name="header">Vínculo Empregatício</f:facet>
								#{pessoa.vinculo.nome}
							</h:column>
							<h:column>
								<h:commandButton class="btn btn-danger" value="Remover" title="Remover" onclick="return confirm('Deseja excluir #{pessoa.nome}?')" action="#{cc.attrs.classe.removeList(pessoa)}"/>
							</h:column>
						</h:dataTable>
					</div>
				</div>
			</div>
		</div>
	
	
		<!-- Modal -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" data-backdrop="static"
			aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">×</button>
						<h4 class="modal-title" id="myModalLabel">Adicionar um Pessoa</h4>
					</div>
					<div class="modal-body">
						
					<h:form id="form">
					
						<div class="control-group">	  			
						    <label class="control-label">SUS</label>
						    <div class="controls">
						    	<h:inputText id="sus" styleClass="form-control"	value="#{cc.attrs.classe.aux.sus}" p:placeholder="Número do Cartão SUS"></h:inputText>
						    </div>
					  	</div>
					  	
					  	<div class="control-group">	  			
						    <label class="control-label">Nome</label>
						    <div class="controls">
						    	<h:inputText id="nome" styleClass="form-control" value="#{cc.attrs.classe.aux.nome}" p:placeholder="Nome"></h:inputText>
						    </div>
					  	</div>
					  	
					  	<div class="control-group">	  			
						    <label class="control-label">Nome da Mãe</label>
						    <div class="controls">
						    	<h:inputText id="mae" styleClass="form-control" value="#{cc.attrs.classe.aux.mae}" disabled="#{cc.attrs.disabled}" p:placeholder="Nome da mãe"></h:inputText>
						    </div>
					  	</div>
					  	
					  	<div class="control-group">	  			
						    <label class="control-label">Data de Nascimento</label>
						    <div class="controls">
								<h:inputText 		id="data" 
													styleClass="form-control" 
													value="#{cc.attrs.classe.aux.dtnascimento}"
													p:placeholder="dd/mm/yyyy">
									<f:convertDateTime timeZone="GMT-3" locale="pt_BR" pattern="dd/MM/yyyy" type="date" />
								</h:inputText>
						    </div>
					  	</div>
					  	
					  	<div class="control-group">	  			
						    <label class="control-label">Idade</label>
						    <div class="controls">
						    	<h:inputText id="idade" styleClass="form-control" value="#{cc.attrs.classe.aux.idade}" p:placeholder="Idade"></h:inputText>
						    </div>
					  	</div>
					  	
					  	<div class="control-group">	  			
						    <label class="control-label">Sexo</label>
						    <div class="controls">
						    	<h:selectOneRadio id="sexo" value="#{cc.attrs.classe.aux.sexo}">
								   <f:selectItem itemValue='m' itemLabel="Masculino" />
								   <f:selectItem itemValue='f' itemLabel="Feminino" />   			
								</h:selectOneRadio>
						    </div>
					  	</div>
					  	
					  	<div class="control-group">	  			
						    <label class="control-label">Raça</label>
						    <div class="controls">
						    	<h:selectOneMenu id="raca" styleClass="form-control"	value="#{cc.attrs.classe.racaPessoa}">
									<f:selectItem itemLabel="Selecione a Raça" itemValue="#{null}" />
									<f:selectItems value="#{cc.attrs.classe.racas}" var="raca"	itemLabel="#{raca.nome}" itemValue="#{raca.codigo}"></f:selectItems>
									<f:ajax process="@this" render="raca" />
								</h:selectOneMenu>
						    </div>
					  	</div>
					  	
					  	<div class="control-group">	  			
						    <label class="control-label">Frequenta a Escola?</label>
						    <div class="controls">
						    	<h:selectOneRadio id="fescola" value="#{cc.attrs.classe.aux.frequentaescola}">
								   <f:selectItem itemValue="#{true}" itemLabel="Sim" />
								   <f:selectItem itemValue="#{false}" itemLabel="Não" />
								   <f:ajax process="@this" render="fescola" />	   			
								</h:selectOneRadio>
						    </div>
					  	</div>
					  	
					  	<div class="control-group">	  			
						    <label class="control-label">Escolaridade</label>
						    <div class="controls">
						    	<h:selectOneMenu id="escolaridade" styleClass="form-control"	value="#{cc.attrs.classe.escolaridadePessoa}">
									<f:selectItem itemLabel="Selecione a Escolaridade" itemValue="#{null}" />
									<f:selectItems value="#{cc.attrs.classe.escolaridades}" var="escolaridade"	itemLabel="#{escolaridade.nome}" itemValue="#{escolaridade.codigo}"></f:selectItems>
									<f:ajax process="@this" render="escolaridade" />
								</h:selectOneMenu>
						    </div>
					  	</div>
					  	
					  	<div class="control-group">	  			
						    <label class="control-label">Vínculo Empregatício</label>
						    <div class="controls">
						    	<h:selectOneMenu id="vinculo" styleClass="form-control"	value="#{cc.attrs.classe.vinculoPessoa}">
									<f:selectItem itemLabel="Selecione o Vínculo Empregatício" itemValue="#{null}" />
									<f:selectItems value="#{cc.attrs.classe.vinculos}" var="vinculo"	itemLabel="#{vinculo.nome}" itemValue="#{vinculo.codigo}"></f:selectItems>
									<f:ajax process="@this" render="vinculo" />
								</h:selectOneMenu>
						    </div>
					  	</div>
					  	
					  	<div class="control-group">	  			
						    <label class="control-label">Parentesco</label>
						    <div class="controls">
						    	<h:inputText id="parentesco" styleClass="form-control" value="#{cc.attrs.classe.aux.parentesco}" p:placeholder="O que você é do chefe da Família?"></h:inputText>
						    </div>
					  	</div>
					  	
					  	<div class="control-group">	  			
						    <label class="control-label">Bolsa-Escola</label>
						    <div class="controls">
						    	<h:selectOneRadio id="bolsaEsc" value="#{cc.attrs.classe.aux.bolsaescola}">
								   <f:selectItem itemValue="#{true}" itemLabel="Sim" />
								   <f:selectItem itemValue="#{false}" itemLabel="Não" />
								   <f:ajax process="@this" render="bolsaEsc" />	   			
								</h:selectOneRadio>
						    </div>
					  	</div>
					  	
					  	<div class="control-group">	  			
						    <label class="control-label">Doenças</label>	
						    <div class="controls">
						    	<h:selectManyMenu value="#{cc.attrs.classe.doencasPessoa}" id="doencas" class='cho span12' multiple="true">
									<f:selectItems value="#{cc.attrs.classe.doencas}" var="doenca" itemLabel="#{doenca.nome}" itemValue="#{doenca.sigla}"></f:selectItems>
								</h:selectManyMenu>
						    </div>
					  	</div>
					</h:form>
					</div>
					<div class="modal-footer">
						<h:commandButton class="btn btn-primary" value="Adicionar" action="#{cc.attrs.classe.addList()}"/>
						<button type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
					</div>
				</div>
			</div>
		</div>

	</h:form>

</composite:implementation>
</html>